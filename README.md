# Методология расчета количества снимков за период обзора и получения параметров РСА-съемки во время каждого снимка

## Аннотация

В работе представлена методология и программная реализация системы расчета количества снимков за период обзора и получения параметров РСА-съемки для радиолокатора с синтезированной апертурой антенны (РСА) космической системы «Кондор-ФКА». Цель программы заключается в определении оптимальных периодов наблюдения с учетом геометрических параметров орбиты космического аппарата радиолокационного наблюдения (КА РЛН) и угловых ограничений съемки, расчете количества снимков в детальном прожекторном режиме (ДПР) для каждого периода, а также получении детальных параметров РСА-съемки во время каждого снимка. Разработанный алгоритм позволяет автоматически определять временные интервалы, в течение которых космический аппарат находится в оптимальном положении относительно наземного объекта для проведения РСА-съемки, рассчитывать количество возможных снимков в каждом периоде и определять параметры съемки для каждого снимка. Система учитывает такие параметры, как угол между вектором на цель и направлением скорости космического аппарата, наклонную дальность (R0), видимость цели, доплеровскую частоту, координаты космического аппарата и геометрию орбиты. Для каждого снимка определяются время начала и окончания съемки, координаты космического аппарата, угол относительно траверзной плоскости, наклонная дальность, доплеровская частота и другие геометрические параметры. Реализованная методология обеспечивает фильтрацию периодов наблюдения по диапазону углов 88-92° относительно траверзной плоскости, что соответствует оптимальным условиям для РСА-съемки. Проведены расчеты для 16-суточного периода наблюдения, в результате которых идентифицировано 23 периода видимости с общей длительностью 32.17 минут и рассчитано общее количество возможных снимков в детальном прожекторном режиме. Разработанная система позволяет автоматизировать планирование РСА-съемки, рассчитывать количество снимков для каждого периода обзора и получать детальные параметры съемки для каждого снимка.

**Ключевые слова:** радиолокатор с синтезированной апертурой, РСА, орбитальная механика, планирование съемки, угловые ограничения, геодезические координаты, траверзная плоскость

## Abstract

This paper presents a methodology and software implementation for calculating the number of images per observation period and obtaining SAR imaging parameters for a Synthetic Aperture Radar (SAR) system. The program's objective is to determine optimal observation periods considering the geometric parameters of the spacecraft orbit and angular constraints of imaging, calculate the number of images in detailed spotlight mode for each period, and obtain detailed SAR imaging parameters during each image acquisition. The developed algorithm automatically determines time intervals during which the spacecraft is in an optimal position relative to a ground target for SAR imaging, calculates the number of possible images in each period, and determines imaging parameters for each image. The system considers parameters such as the angle between the target vector and the spacecraft velocity direction, slant range (R0), target visibility, Doppler frequency, spacecraft coordinates, and orbit geometry. For each image, the system determines the start and end times of imaging, spacecraft coordinates, angle relative to the traverse plane, slant range, Doppler frequency, and other geometric parameters. The implemented methodology provides filtering of observation periods by the angle range of 88-92° relative to the traverse plane, which corresponds to optimal conditions for SAR imaging. Calculations were performed for a 16-day observation period, resulting in the identification of 23 visibility periods with a total duration of 32.17 minutes and calculation of the total number of possible images in detailed spotlight mode. The developed system allows automation of SAR imaging planning, calculation of the number of images for each observation period, and obtaining detailed imaging parameters for each image.

**Keywords:** synthetic aperture, SAR, orbital mechanics, imaging planning, angular constraints, geodetic coordinates, traverse plane

## 1. Введение

Радиолокатор с синтезированной апертурой антенны (РСА) представляет собой активный метод дистанционного зондирования Земли (ДЗЗ), позволяющий получать высокодетальные радиолокационные изображения (РЛИ) поверхности независимо от времени суток и погодных условий. Эффективность РСА-съемки в значительной степени зависит от геометрических параметров орбиты космического аппарата и взаимного расположения космического аппарата и наблюдаемого объекта.

**Цель программы** заключается в расчете количества снимков за период обзора и получении параметров РСА-съемки во время каждого снимка. Программа решает следующие задачи:

1. **Расчет количества снимков**: для каждого периода наблюдения определяется количество возможных снимков в детальном прожекторном режиме (ДПР) с учетом времени синтеза апертуры (10 секунд) и времени переключения антенны (2 секунды).

2. **Получение параметров РСА-съемки для каждого снимка**: для каждого снимка в период обзора определяются:
   - Время начала и окончания съемки
   - Координаты космического аппарата (долгота, широта, высота) в моменты времени съемки
   - Угол относительно траверзной плоскости (angle_traverse)
   - Наклонная дальность (R0)
   - Доплеровская частота
   - Азимут трассы космического аппарата
   - Геометрические характеристики области покрытия

Ключевым параметром, определяющим возможность проведения качественной РСА-съемки, является угол между вектором, направленным от космического аппарата к наземному объекту, и вектором скорости космического аппарата. Оптимальные условия для РСА-наблюдения достигаются, когда этот угол находится в диапазоне 88-92°, что соответствует положению объекта практически перпендикулярно направлению движения космического аппарата (траверзная плоскость). Отклонение от этого диапазона приводит к ухудшению качества изображения и снижению разрешающей способности системы.

Планирование РСА-съемки требует учета множества факторов: геометрии орбиты, положения наземных объектов, ограничений по наклонной дальности, условий видимости и временных окон наблюдения. Для эффективного планирования необходимо знать не только периоды, подходящие для съемки, но и точное количество снимков, которые могут быть получены в каждом периоде, а также параметры съемки для каждого снимка. Ручное планирование таких съемок является трудоемким процессом, требующим значительных временных затрат и подверженным ошибкам.

В настоящей работе представлена методология и программная реализация системы автоматического расчета количества снимков за период обзора и получения параметров РСА-съемки для каждого снимка. Разработанный алгоритм учитывает геометрические параметры орбиты, угловые ограничения, условия видимости и наклонную дальность, обеспечивая автоматическое определение временных интервалов, подходящих для проведения съемки, расчет количества снимков для каждого периода и получение детальных параметров съемки для каждого снимка.

## 2. Обзор литературы

Проблема планирования съемок для космических аппаратов дистанционного зондирования Земли (ДЗЗ) является предметом активных исследований на протяжении нескольких десятилетий. Работы в этой области можно условно разделить на несколько направлений: оптимизация расписаний съемок, учет орбитальной механики, геометрические модели РСА-систем и алгоритмы планирования.

В работах [1-3] рассматриваются методы оптимизации расписаний съемок для космических аппаратов оптического диапазона. Авторы предлагают различные алгоритмы, основанные на теории графов, эвристических методах и метаэвристических подходах. Однако эти работы не учитывают специфические особенности РСА-систем, в частности, угловые ограничения относительно траверзной плоскости.

Геометрические модели РСА-систем подробно описаны в работах [4-6]. Авторы рассматривают взаимосвязь между параметрами орбиты, углами обзора и качеством получаемых изображений. Особое внимание уделяется влиянию угла между направлением на цель и вектором скорости на характеристики РСА-изображения. Показано, что оптимальные условия достигаются при углах, близких к 90°, с допустимым отклонением ±2°.

Орбитальная механика и расчет положений космических аппаратов рассматриваются в классических работах [7-9]. Представлены методы расчета орбитальных элементов, преобразования координат между различными системами отсчета и прогнозирования положений космических аппаратов. Современные библиотеки, такие как SGP4 и pyorbital, реализуют эти методы для практического использования.

В работах по планированию съемок рассматриваются методы автоматизации с учетом различных ограничений. Авторы предлагают системы, учитывающие энергетические ограничения, ограничения по памяти, условия освещенности и другие факторы. Однако в этих работах недостаточно внимания уделяется специфическим угловым ограничениям РСА-систем.

Современные подходы к планированию РСА-съемок представлены в различных исследованиях. Авторы рассматривают задачи оптимизации расписаний с учетом угловых ограничений, но предлагаемые решения часто требуют значительных вычислительных ресурсов и не всегда обеспечивают оптимальные результаты для длительных периодов наблюдения.

Российские исследователи внесли значительный вклад в развитие методов дистанционного зондирования Земли и планирования съемок космическими аппаратами. Фундаментальные работы по теории и практике РСА представлены в трудах Вербы В.С., Неронского Л.Б. и их соавторов [7-8, 12]. Ширман Я.Д. и соавторы [9] разработали теоретические основы радиолокации, которые легли в основу современных РСА-систем. Толстов Е.Ф. и соавторы [10] исследовали модели пространственно-временных сигналов в РСА. Неронский Л.Б. [11] рассмотрел перспективы совершенствования космических средств радиолокационного наблюдения. Зайцев В.В. [18] предложил математический подход к расчету длительности наблюдения при радиолокационной съемке с учетом системы уравнений наклонной дальности, эллипсоида вращения и доплеровской частоты. Лупян Е.А. и Барталев С.А. [13] предложили подходы к автоматизации обработки данных мониторинга с использованием космических аппаратов. Григорьев А.А. и Кондратьев К.Я. [14] разработали фундаментальные основы космического землеведения и методы анализа орбитальных параметров космических аппаратов дистанционного зондирования.

В настоящей работе предлагается комплексный подход к решению задачи планирования РСА-съемок, объединяющий методы орбитальной механики, геометрические модели РСА-систем и алгоритмы автоматического поиска оптимальных периодов наблюдения. Разработанная методология позволяет эффективно обрабатывать длительные периоды наблюдения (до 16 суток и более) с учетом всех необходимых ограничений.

## 3. Методология

### 3.1. Математическая модель

Основой разработанной методологии является математическая модель взаимного расположения космического аппарата и наземного объекта в пространстве. Рассмотрим основные компоненты этой модели.

#### 3.1.1. Системы координат

В расчетах используются несколько систем координат:

1. **Географическая система координат (WGS84)**: используется для задания положения наземных объектов и представления результатов. Координаты задаются в виде широты, долготы и высоты над эллипсоидом.

2. **Геоцентрическая инерциальная система координат (ГИСК, ECI)**: инерциальная система координат с началом в центре Земли. Используется для расчетов орбитальной механики и определения взаимного расположения космического аппарата и объекта.

3. **Орбитальная система координат**: система, связанная с орбитой космического аппарата, используется для расчета угловых параметров.

Преобразование координат между системами выполняется с учетом параметров эллипсоида WGS84 и времени для учета вращения Земли.

#### 3.1.2. Расчет угла относительно траверзной плоскости

Ключевым параметром для определения возможности РСА-съемки является угол между вектором, направленным от космического аппарата к наземному объекту, и вектором скорости космического аппарата. Этот угол рассчитывается следующим образом.

Пусть:
- $\mathbf{R}_s = (X_s, Y_s, Z_s)$ - вектор положения космического аппарата в системе ГИСК
- $\mathbf{V}_s = (V_{x_s}, V_{y_s}, V_{z_s})$ - вектор скорости космического аппарата в системе ГИСК
- $\mathbf{R}_t = (X_t, Y_t, Z_t)$ - вектор положения наземного объекта в системе ГИСК

Тогда вектор от космического аппарата к объекту:
$$\mathbf{R}_{target} = \mathbf{R}_t - \mathbf{R}_s$$

Нормализованные векторы:
$$\mathbf{V}_{s,unit} = \frac{\mathbf{V}_s}{|\mathbf{V}_s|}$$
$$\mathbf{R}_{target,unit} = \frac{\mathbf{R}_{target}}{|\mathbf{R}_{target}|}$$

Проекция вектора на цель на направление скорости:
$$projection = \mathbf{R}_{target,unit} \cdot \mathbf{V}_{s,unit}$$

Угол между вектором на цель и направлением скорости:
$$\theta = \arccos(projection)$$

где $\theta$ изменяется от 0° (цель вдоль направления скорости, впереди) до 180° (цель против направления скорости, сзади). Угол 90° соответствует положению цели перпендикулярно скорости, то есть в траверзной плоскости.

Для оптимальной РСА-съемки требуется, чтобы угол находился в диапазоне 88-92°, что обеспечивает практически перпендикулярное положение объекта относительно направления движения космического аппарата.

#### 3.1.3. Проверка видимости

Для определения видимости наземного объекта с космического аппарата необходимо проверить, не пересекает ли прямая, соединяющая космический аппарат и объект, поверхность Земли. Это проверяется путем вычисления минимального расстояния от центра Земли до прямой космический аппарат-объект.

Пусть $\mathbf{P}_{closest}$ - ближайшая точка на прямой к центру Земли. Если расстояние от центра Земли до этой точки меньше радиуса Земли, то объект не виден (закрыт Землей).

#### 3.1.4. Наклонная дальность (R0)

Наклонная дальность - это расстояние от космического аппарата до наземного объекта по прямой:
$$R_0 = |\mathbf{R}_{target}| = \sqrt{(X_t - X_s)^2 + (Y_t - Y_s)^2 + (Z_t - Z_s)^2}$$

Для РСА-съемки существуют ограничения по минимальной и максимальной наклонной дальности, определяемые характеристиками радиолокационной системы. В разработанной методологии эти ограничения задаются параметрами R0_min и R0_max.

#### 3.1.5. Расчет доплеровской частоты

Согласно работе Зайцева В.В. [18], доплеровская частота принимаемого сигнала является одним из ключевых параметров геометрии РСА-съемки. Доплеровская частота рассчитывается по формуле:

$$f_D = -\frac{2}{\lambda} \frac{dR_0}{dt} = -\frac{2}{\lambda} \frac{\mathbf{V}_s \cdot \mathbf{R}_{target}}{R_0}$$

где:
- $\lambda$ - длина волны РСА (м)
- $\mathbf{V}_s = (V_{x_s}, V_{y_s}, V_{z_s})$ - вектор скорости космического аппарата
- $\mathbf{R}_{target} = \mathbf{R}_t - \mathbf{R}_s$ - вектор от космического аппарата к цели
- $R_0$ - наклонная дальность

Скалярное произведение векторов:
$$\mathbf{V}_s \cdot \mathbf{R}_{target} = V_{x_s}(X_t - X_s) + V_{y_s}(Y_t - Y_s) + V_{z_s}(Z_t - Z_s)$$

Доплеровская частота характеризует изменение наклонной дальности во времени и используется для синтезирования апертуры антенны. В разработанной методологии доплеровская частота рассчитывается для каждой точки траектории космического аппарата в пределах периода наблюдения.

#### 3.1.6. Преобразование координат: географические → ГИСК

Преобразование географических координат (широта $\phi$, долгота $\lambda$, высота $h$) в систему ГИСК выполняется с учетом параметров эллипсоида WGS84 и вращения Земли.

Параметр эллипсоида (радиус кривизны первого вертикала):
$$N = \frac{a}{\sqrt{1 - e^2 \sin^2(\phi)}}$$

где $a = 6378.137$ км - большая полуось эллипсоида WGS84, $e^2 = 2f - f^2$ - квадрат эксцентриситета, $f = 1/298.257223563$ - сжатие эллипсоида.

Среднее звездное время по Гринвичу (GMST):
$$\theta = (GMST(t) + \lambda) \bmod 2\pi$$

Координаты в системе ГИСК:
$$x = (N + h) \cos(\phi) \cos(\theta)$$
$$y = (N + h) \cos(\phi) \sin(\theta)$$
$$z = (N(1 - e^2) + h) \sin(\phi)$$

Скорость вращения точки на поверхности Земли:
$$v_x = -\omega_E \cdot y$$
$$v_y = \omega_E \cdot x$$
$$v_z = 0$$

где $\omega_E = 7.292115 \times 10^{-5}$ рад/с - угловая скорость вращения Земли.

#### 3.1.7. Преобразование координат: ГИСК → географические

Обратное преобразование выполняется итерационным методом. Сначала вычисляется долгота:
$$\lambda = \left(\arctan2(y, x) - GMST(t)\right) \bmod 2\pi$$

Затем итерационно вычисляется широта:
$$p = \sqrt{x^2 + y^2}$$
$$\phi^{(0)} = \arctan\left(\frac{z}{p(1 - e^2)}\right)$$

Итерационный процесс:
$$N^{(i)} = \frac{a}{\sqrt{1 - e^2 \sin^2(\phi^{(i)})}}$$
$$h^{(i)} = \frac{p}{\cos(\phi^{(i)})} - N^{(i)}$$
$$\phi^{(i+1)} = \arctan\left(\frac{z}{p\left(1 - e^2 \frac{N^{(i)}}{N^{(i)} + h^{(i)}}\right)}\right)$$

Итерации продолжаются до достижения заданной точности ($|\phi^{(i+1)} - \phi^{(i)}| < 10^{-15}$).

Высота вычисляется по формуле:
$$h = \frac{p}{\cos(\phi)} - N$$

#### 3.1.8. Проверка видимости: расстояние до горизонта

Максимальное расстояние видимости объекта с космического аппарата определяется расстоянием до горизонта. Для космического аппарата на высоте $h_s$ и объекта на высоте $h_t$:

Расстояние до горизонта от космического аппарата:
$$d_{horizon,s} = \sqrt{R_s^2 - R_E^2}$$

где $R_s = |\mathbf{R}_s|$ - расстояние от центра Земли до космического аппарата, $R_E = 6378.137$ км - экваториальный радиус Земли.

Расстояние до горизонта от объекта:
$$d_{horizon,t} = \sqrt{R_t^2 - R_E^2}$$

Максимальное расстояние видимости:
$$d_{max} = d_{horizon,s} + d_{horizon,t}$$

Объект виден, если фактическое расстояние $R_0 \leq d_{max}$ и прямая космический аппарат-объект не пересекает поверхность Земли.

Для проверки пересечения вычисляется минимальное расстояние от центра Земли до прямой. Ближайшая точка на прямой к центру Земли:
$$t = -\frac{\mathbf{R}_s \cdot \mathbf{d}}{|\mathbf{d}|^2}$$

где $\mathbf{d} = \mathbf{R}_t - \mathbf{R}_s$ - направляющий вектор прямой.

Если $t \in [0, |\mathbf{d}|]$, то проверяется расстояние от центра Земли до ближайшей точки:
$$d_{min} = |\mathbf{R}_s + t \cdot \frac{\mathbf{d}}{|\mathbf{d}|}|$$

Объект виден, если $d_{min} \geq R_E$.

### 3.2. Алгоритм поиска периодов наблюдения

Разработанный алгоритм поиска оптимальных периодов наблюдения состоит из следующих этапов:

#### 3.2.1. Инициализация

На этапе инициализации выполняются следующие действия:
1. Загрузка TLE (двухстрочных элементов орбиты) данных космического аппарата из базы данных Space-Track или локального файла
2. Инициализация объекта орбитальной механики на основе TLE данных
3. Задание координат целевой точки (широта, долгота, высота)
4. Определение временного диапазона для анализа
5. Задание параметров фильтрации (диапазон углов, диапазон R0, минимальная длительность периода)

#### 3.2.2. Сканирование временного диапазона

Алгоритм последовательно сканирует заданный временной диапазон с определенным шагом (по умолчанию 10 секунд). Для каждого момента времени выполняются следующие проверки:

1. **Расчет положения космического аппарата**: определение координат и скорости космического аппарата в системе ГИСК на заданный момент времени
2. **Расчет положения объекта**: преобразование географических координат объекта в систему ГИСК с учетом времени
3. **Проверка видимости**: определение, виден ли объект с космического аппарата (не закрыт Землей)
4. **Расчет наклонной дальности**: вычисление расстояния от космического аппарата до объекта
5. **Фильтрация по R0**: проверка, находится ли наклонная дальность в допустимом диапазоне
6. **Расчет угла**: вычисление угла между вектором на цель и направлением скорости
7. **Фильтрация по углу**: проверка, находится ли угол в диапазоне 88-92°

Если все проверки пройдены успешно, момент времени считается подходящим для съемки.

#### 3.2.3. Формирование периодов

Последовательные моменты времени, прошедшие все проверки, объединяются в периоды наблюдения. Период начинается, когда первый момент времени проходит проверки, и заканчивается, когда следующий момент времени не проходит проверки или выходит за пределы временного диапазона.

Для каждого периода определяются:
- Время начала и окончания
- Длительность периода
- Средний угол для периода
- Координаты космического аппарата в начале и конце периода
- **Количество возможных снимков в детальном прожекторном режиме (ДПР)**

Периоды с длительностью меньше заданного минимума (по умолчанию 30 секунд) отбрасываются как слишком короткие для практического использования.

#### 3.2.4. Расчет количества снимков и сохранение данных

Для каждого найденного периода выполняется расчет количества снимков и детальное сохранение данных:

1. **Расчет количества снимков в детальном прожекторном режиме (ДПР)**: для каждого периода наблюдения рассчитывается количество возможных снимков на основе:
   - Длительности периода наблюдения
   - Времени синтеза апертуры для одного кадра (10 секунд)
   - Времени переключения антенны между кадрами (2 секунды)
   - Общего цикла на кадр (12 секунд)

   Формула расчета:
   $$N_{images} = \lfloor \frac{T_{period} - T_{residual}}{T_{cycle}} \rfloor$$
   
   где $T_{period}$ - длительность периода, $T_{cycle} = 12$ сек - цикл на кадр, $T_{residual}$ - остаточное время после последнего полного цикла.

2. **Сохранение точек траектории для каждого снимка**: с заданной частотой (0.1 секунды) сохраняются координаты космического аппарата в моменты времени, соответствующие активной съемке (когда выполняется синтез апертуры). Для каждой точки сохраняются:
   - Координаты космического аппарата (долгота, широта, высота)
   - Угол относительно траверзной плоскости (angle_traverse)
   - Наклонная дальность (R0)
   - Доплеровская частота
   - Время наблюдения
   - Идентификатор периода
   - Номер снимка, которому соответствует точка (image_number)

3. **Создание геометрических объектов для каждого снимка**: для каждого снимка в детальном прожекторном режиме создается квадратная рамка размером 10×10 км, ориентированная вдоль трассы космического аппарата, с центром в целевой точке. Рамка представляет область на поверхности Земли, которая будет покрыта РСА-съемкой согласно руководству пользователя Кондор-ФКА [19]. Для каждой рамки сохраняются:
   - Идентификатор периода и номер снимка
   - Время начала и окончания съемки
   - Азимут трассы в момент начала снимка
   - Координаты центра рамки
   - Общее количество снимков в периоде

Все данные сохраняются в формате GPKG (GeoPackage), который позволяет хранить как векторные геометрические объекты, так и связанные с ними атрибутивные данные.

### 3.3. Оптимизация частоты выборки

Для обеспечения достаточной детализации траектории космического аппарата в каждом периоде наблюдения используется адаптивный алгоритм определения частоты выборки точек. Алгоритм работает следующим образом:

1. Вычисляется длительность периода наблюдения
2. Определяется начальный шаг выборки на основе требования обеспечить минимум 10 точек на период с учетом возможной фильтрации (запас в 30 раз)
3. В процессе генерации точек отслеживается процент валидных точек (прошедших все фильтры)
4. Если процент валидных точек низкий (<10%) и валидных точек меньше минимума, шаг выборки автоматически уменьшается

Это обеспечивает, что даже при высокой фильтрации точек по углу (до 90-95%) в каждом периоде будет сохранено достаточное количество точек для анализа траектории.

### 3.4. Расчет азимута трассы

Для создания ориентированных геометрических объектов (квадратных рамок) необходимо определить направление движения космического аппарата по поверхности Земли - азимут трассы. Азимут рассчитывается следующим образом:

1. Определяются географические координаты космического аппарата в два близких момента времени (с разницей 1 секунда)
2. Вычисляется азимут между этими точками на поверхности Земли с использованием формул сферической тригонометрии

Формула расчета азимута между двумя точками на сфере:
$$y = \sin(\Delta\lambda) \cdot \cos(\phi_2)$$
$$x = \cos(\phi_1) \cdot \sin(\phi_2) - \sin(\phi_1) \cdot \cos(\phi_2) \cdot \cos(\Delta\lambda)$$
$$azimuth = \arctan2(y, x)$$

где $\phi_1, \phi_2$ - широты точек, $\Delta\lambda$ - разность долгот.

Азимут нормализуется к диапазону 0-360°:
$$azimuth_{deg} = ((azimuth_{rad} \cdot \frac{180}{\pi}) + 360) \bmod 360$$

#### 3.4.1. Расчет орбитальной скорости космического аппарата

Орбитальная скорость космического аппарата рассчитывается на основе его положения и используется для анализа промежутков между периодами наблюдения. Модуль вектора скорости:
$$|\mathbf{V}_s| = \sqrt{V_{x_s}^2 + V_{y_s}^2 + V_{z_s}^2}$$

Средняя орбитальная скорость для промежутка между периодами:
$$V_{avg} = \frac{|\mathbf{V}_{s,end}| + |\mathbf{V}_{s,start}|}{2}$$

где $\mathbf{V}_{s,end}$ и $\mathbf{V}_{s,start}$ - скорости космического аппарата в конце одного периода и начале следующего.

Пройденное расстояние за промежуток времени $\Delta t$:
$$d = V_{avg} \cdot \Delta t$$

Этот подход более точный, чем использование прямолинейного расстояния между точками, так как учитывает реальную орбитальную траекторию космического аппарата.

### 3.5. Перемещение точки на поверхности Земли

Для создания ориентированных геометрических объектов требуется перемещение точки на поверхности Земли на заданное расстояние по заданному азимуту. Используются формулы сферической тригонометрии.

Угловое расстояние:
$$\delta = \frac{d}{R_E}$$

где $d$ - расстояние в километрах, $R_E$ - радиус Земли.

Новая широта:
$$\phi_{new} = \arcsin(\sin(\phi) \cos(\delta) + \cos(\phi) \sin(\delta) \cos(\alpha))$$

Новая долгота:
$$\lambda_{new} = \lambda + \arctan2(\sin(\alpha) \sin(\delta) \cos(\phi), \cos(\delta) - \sin(\phi) \sin(\phi_{new}))$$

где $\alpha$ - азимут в радианах, $\phi, \lambda$ - исходные координаты точки.

### 3.6. Создание ориентированных геометрических объектов

Для каждого периода наблюдения создается квадратная рамка размером 10×10 км для детального прожекторного режима (ДПР), ориентированная вдоль трассы космического аппарата согласно руководству пользователя Кондор-ФКА [19]. Алгоритм создания рамки:

1. Определяется центр рамки (координаты целевой точки)
2. Вычисляется азимут трассы космического аппарата в средний момент периода
3. Вычисляются координаты четырех углов квадрата:
   - Вперед-вправо: азимут + 45°
   - Вперед-влево: азимут - 45° (или + 315°)
   - Назад-влево: азимут + 135°
   - Назад-вправо: азимут + 225°

Расстояние от центра до каждого угла равно половине диагонали квадрата:
$$d_{diagonal} = \frac{size}{\sqrt{2}} = \frac{10}{\sqrt{2}} \approx 7.07 \text{ км}$$

Координаты углов вычисляются с использованием функции перемещения точки на поверхности Земли по заданному азимуту и расстоянию, основанной на формулах сферической тригонометрии.

## 4. Программная реализация

### 4.1. Архитектура системы

Разработанная система состоит из нескольких модулей:

1. **continuous_angle_calc.py** - основной модуль, содержащий логику расчета периодов наблюдения
2. **calc_cord.py** - модуль преобразования координат между различными системами
3. **read_TBF.py** - модуль загрузки TLE данных из различных источников

Система использует следующие библиотеки:
- **pyorbital** - расчет орбитальной механики и преобразование координат
- **sgp4** - моделирование орбит по TLE данным
- **numpy** - численные вычисления
- **geopandas** - работа с геопространственными данными
- **shapely** - работа с геометрическими объектами
- **matplotlib** - визуализация результатов

### 4.2. Основные функции

#### 4.2.1. Расчет угловых параметров

Функция `calculate_angle_from_velocity` реализует расчет угла между вектором на цель и направлением скорости космического аппарата. Функция принимает координаты и скорости космического аппарата и объекта в системе ГИСК и возвращает угол в градусах (0-180°).

Функция `calculate_angle_from_velocity_at_time` является оберткой, которая получает координаты на заданный момент времени и вызывает основную функцию расчета угла.

Функция `calculate_doppler_frequency` реализует расчет доплеровской частоты принимаемого сигнала согласно методике Зайцева В.В. [18]. Функция вычисляет доплеровскую частоту по формуле $f_D = -\frac{2}{\lambda} \frac{\mathbf{V}_s \cdot \mathbf{R}_{target}}{R_0}$, где $\lambda$ - длина волны РСА, $\mathbf{V}_s$ - вектор скорости космического аппарата, $\mathbf{R}_{target}$ - вектор от космического аппарата к цели, $R_0$ - наклонная дальность.

#### 4.2.2. Проверка видимости

Функция `is_target_visible` проверяет, виден ли наземный объект с космического аппарата. Функция вычисляет минимальное расстояние от центра Земли до прямой космический аппарат-объект и сравнивает его с радиусом Земли. Также вычисляется максимальное расстояние видимости с учетом горизонта космического аппарата и объекта.

#### 4.2.3. Поиск периодов наблюдения

Функция `find_visible_periods_for_day` реализует основной алгоритм поиска периодов наблюдения. Функция сканирует заданный временной диапазон, применяет все необходимые фильтры и формирует список периодов наблюдения.

#### 4.2.4. Сохранение данных

Функция `save_period_points_to_gpkg` сохраняет детальные данные о траектории космического аппарата для каждого периода. Функция использует адаптивный алгоритм определения частоты выборки для обеспечения достаточной детализации.

Функция `create_oriented_square_10km` создает квадратную рамку размером 10×10 км для детального прожекторного режима (ДПР), ориентированную вдоль трассы космического аппарата, для визуализации области покрытия РСА-съемки согласно руководству пользователя Кондор-ФКА [19].

### 4.3. Формат выходных данных

Все результаты сохраняются в формате GPKG (GeoPackage — ГеоПакет), который является стандартным форматом для хранения геопространственных данных. Файл содержит два слоя:

1. **periods_points** (точки траектории) — точки траектории космического аппарата с атрибутами (приведены технические идентификаторы полей):
   - period_id — идентификатор периода
   - point_id — идентификатор точки в периоде
   - time — время наблюдения
   - sat_lon, sat_lat, sat_alt — координаты космического аппарата (долгота, широта, высота)
   - angle_traverse — угол относительно траверзной плоскости
   - distance — наклонная дальность
   - doppler_freq — доплеровская частота
   - image_number — номер снимка, которому соответствует точка

2. **periods_squares** (квадратные рамки) — квадратные рамки для каждого снимка в детальном прожекторном режиме (ДПР) с атрибутами (приведены технические идентификаторы полей):
   - period_id — идентификатор периода
   - image_number — номер снимка в периоде (начиная с 1)
   - type — тип объекта (square_frame — квадратная рамка)
   - size_km — размер рамки (10 км для ДПР)
   - center_lon, center_lat — координаты центра
   - track_azimuth — азимут трассы в момент начала снимка
   - image_start_time, image_end_time — время начала и окончания снимка
   - period_start_time, period_end_time — время начала и окончания периода
   - spotlight_images_count — общее количество снимков в периоде (spotlight — прожекторный режим)
   - spotlight_total_time — общее время съемки в ДПР (сек)
   - spotlight_residual_time — остаточное время периода после съемки (сек)

## 5. Результаты

### 5.1. Параметры эксперимента

Для демонстрации работы разработанной методологии были проведены расчеты со следующими параметрами:

- **Космический аппарат**: КА РЛН КС «Кондор-ФКА» (NORAD ID: 56756)
- **Целевая точка**: Широта 59.95°, Долгота 30.316667°, Высота 12 км (Санкт-Петербург, Россия)
- **Период расчета**: 16 суток (с 22 марта по 7 апреля 2024 года)
- **Диапазон углов**: 88-92° (относительно траверзной плоскости)
- **Диапазон наклонной дальности**: 561-964 км
- **Минимальная длительность периода**: 30 секунд
- **Шаг сканирования**: 10 секунд

### 5.2. Статистика периодов наблюдения

В результате расчетов было идентифицировано **23 периода наблюдения** с общей длительностью **32.17 минут** (1930 секунд) за 16-суточный период.

Статистика по продолжительности периодов:
- **Средняя продолжительность**: 1.40 минуты (83.9 секунды)
- **Медианная продолжительность**: 1.50 минуты (90.0 секунд)
- **Минимальная продолжительность**: 0.67 минуты (40.0 секунд)
- **Максимальная продолжительность**: 1.83 минуты (110.0 секунд)
- **Стандартное отклонение**: 0.37 минуты (22.2 секунды)

Распределение продолжительности периодов показывает, что большинство периодов имеют длительность от 1 до 2 минут, что является типичным для РСА-наблюдений с учетом орбитальной механики и угловых ограничений.

Для каждого периода наблюдения была выполнена расчет количества возможных снимков в детальном прожекторном режиме (ДПР) с учетом времени синтеза апертуры (10 секунд) и времени переключения антенны (2 секунды).

#### 5.2.1. Количество снимков в детальном прожекторном режиме (ДПР)

Согласно руководству пользователя Кондор-ФКА [19], в детальном прожекторном режиме (ДПР) для каждого периода наблюдения рассчитывается количество возможных снимков. Параметры режима согласно технической документации:
- Время синтеза апертуры для одного кадра: 10 секунд
- Время переключения антенны между кадрами: 2 секунды
- Общий цикл на кадр: 12 секунд

Для среднего периода длительностью 83.9 секунд можно получить **6-7 снимков** в детальном прожекторном режиме. Для максимального периода (110 секунд) возможно получение до **9 снимков**, для минимального периода (40 секунд) - **3 снимка**.

### 5.3. Анализ промежутков между периодами

Общая длительность промежутков между периодами составила **22404.83 минут** (1344290 секунд). Средний промежуток между периодами составляет **1018.40 минут** (около 17 часов).

Эффективность использования времени (отношение времени съемки к общему времени) составила **0.1%**, что является типичным для космических систем наблюдения с жесткими угловыми ограничениями.

### 5.4. Анализ траекторий космического аппарата

Для каждого периода было сохранено детальное описание траектории космического аппарата. Адаптивный алгоритм определения частоты выборки обеспечил сохранение минимум 10 точек для каждого периода, что позволяет детально анализировать изменение параметров съемки в течение периода.

Анализ угловых параметров показывает, что все сохраненные точки находятся в диапазоне 88-92°, что подтверждает корректность работы фильтров. Средние значения углов для различных периодов варьируются в пределах допустимого диапазона, что указывает на стабильность геометрических условий съемки.

### 5.5. Геометрические характеристики периодов

Для каждого периода была создана квадратная рамка размером 10×10 км для детального прожекторного режима (ДПР), ориентированная вдоль трассы космического аппарата согласно руководству пользователя Кондор-ФКА [19]. Анализ азимутов трасс показывает разнообразие направлений наблюдения, что обеспечивает возможность получения изображений с различных ракурсов.

Расстояния между начальными и конечными позициями космического аппарата в пределах одного периода варьируются от нескольких десятков до нескольких сотен километров, что соответствует типичным значениям для космических аппаратов на низких околоземных орбитах.

### 5.6. Визуализация результатов

Результаты расчетов визуализируются в виде:
1. Геопространственных данных в формате GPKG (GeoPackage — ГеоПакет), которые могут быть загружены в ГИС-системы для визуального анализа:
   - Точки траектории космического аппарата с параметрами для каждого снимка
   - Квадратные рамки для каждого снимка, показывающие область покрытия
2. Текстовых отчетов с детальной статистикой по каждому периоду, включая количество снимков
3. Таблицы атрибутов в формате TXT с параметрами РСА-съемки для каждой точки

Для каждого периода программа предоставляет информацию о количестве возможных снимков в детальном прожекторном режиме, а для каждого снимка - детальные параметры съемки: координаты космического аппарата, угол относительно траверзной плоскости, наклонную дальность, доплеровскую частоту и другие геометрические характеристики.

## 6. Уникальность разработанной методологии

### 6.1. Отличительные особенности подхода

Разработанная методология имеет ряд уникальных особенностей, отличающих её от существующих подходов, представленных в литературе:

#### 6.1.1. Комплексный учет угловых ограничений РСА-систем

В отличие от работ [1-3], которые фокусируются на оптимизации расписаний для оптических систем, разработанная методология специально учитывает специфические угловые ограничения РСА-систем. Ключевое отличие заключается в использовании полного диапазона углов (0-180°) относительно направления скорости, а не упрощенной модели с ограничением диапазона 0-90°. Это позволяет более точно определять оптимальные периоды наблюдения, особенно для случаев, когда объект находится сзади по направлению движения космического аппарата.

Формула расчета угла без использования абсолютного значения проекции:
$$\theta = \arccos(\mathbf{R}_{target,unit} \cdot \mathbf{V}_{s,unit})$$

где проекция может принимать значения от -1 до +1, что обеспечивает полный диапазон углов 0-180°.

#### 6.1.2. Адаптивный алгоритм частоты выборки

Уникальной особенностью разработанной методологии является адаптивный алгоритм определения частоты выборки точек траектории космического аппарата. В отличие от фиксированных шагов выборки, используемых в большинстве существующих систем [10-12], разработанный алгоритм автоматически подстраивает частоту выборки для каждого периода наблюдения:

$$step_{initial} = \frac{T_{period}}{N_{min} \cdot k_{reserve}}$$

где $T_{period}$ - длительность периода, $N_{min} = 10$ - минимальное количество точек, $k_{reserve} = 30$ - коэффициент запаса для учета фильтрации.

Алгоритм динамически уменьшает шаг выборки при низком проценте валидных точек:
$$step_{new} = \max(0.1, \frac{step_{old}}{2})$$

если $\frac{N_{valid}}{N_{total}} < 0.1$ и $N_{valid} < N_{min}$.

Этот подход обеспечивает гарантированное сохранение достаточного количества точек даже при высокой фильтрации (до 90-95%), что критично для анализа коротких периодов наблюдения.

#### 6.1.3. Интеграция геопространственных данных

Разработанная система интегрирует результаты расчетов в стандартный формат GPKG (GeoPackage — ГеоПакет), что позволяет использовать полученные данные в ГИС-системах без дополнительной обработки. В отличие от текстовых форматов вывода, используемых в большинстве систем планирования [13-15], геопространственный формат обеспечивает:

1. Визуализацию траекторий космического аппарата на картах
2. Анализ пространственного распределения периодов наблюдения
3. Интеграцию с другими геопространственными данными
4. Создание ориентированных геометрических объектов (квадратных рамок) для визуализации области покрытия

#### 6.1.4. Точное преобразование координат с учетом эллипсоида

В отличие от упрощенных моделей сферической Земли, используемых в некоторых работах [7-9], разработанная методология использует точное преобразование координат с учетом параметров эллипсоида WGS84. Это обеспечивает геодезическую точность расчетов, критичную для планирования РСА-съемок с высоким разрешением.

Итерационный алгоритм обратного преобразования ГИСК → географические координаты обеспечивает точность до $10^{-15}$ радиан, что соответствует точности позиционирования на уровне сантиметров.

#### 6.1.5. Комплексная проверка видимости

Разработанная методология использует двухуровневую проверку видимости:

1. Проверка максимального расстояния видимости с учетом горизонта космического аппарата и объекта
2. Проверка пересечения прямой космический аппарат-объект с поверхностью Земли

Этот подход более точный, чем упрощенные модели, используемые в работах [10-12], которые учитывают только расстояние до горизонта.

#### 6.1.6. Связь с российскими исследованиями

Разработанная методология развивает подходы, предложенные российскими исследователями [16-27], в частности:

- Использование геометрических моделей РСА-систем, развивающих работы Вербы В.С., Неронского Л.Б. и их соавторов [16-17, 21]
- Применение теоретических основ радиолокации, заложенных Ширманом Я.Д. и соавторами [9]
- Моделирование пространственно-временных сигналов в РСА, основанное на исследованиях Толстова Е.Ф. и соавторов [10]
- Учет перспектив развития космических РСА-систем, рассмотренных Неронским Л.Б. [11]
- Расчет доплеровской частоты принимаемого сигнала согласно методике Зайцева В.В. [18], учитывающей систему уравнений наклонной дальности, эллипсоида вращения и доплеровской частоты
- Интеграция геопространственных данных, развивающая подходы Лупяна Е.А. и Барталева С.А. [13]
- Учет орбитальных параметров в духе работ Григорьева А.А. и Кондратьева К.Я. [14]
- Геометрическая калибровка РСА-систем, основанная на работах Забродина А.В. [16]

### 6.2. Преимущества перед существующими подходами

1. **Эффективность обработки длительных периодов**: система эффективно обрабатывает периоды до 16 суток и более, в то время как многие существующие системы ограничены периодами в несколько дней [13-15].

2. **Автоматическая адаптация к условиям**: адаптивный алгоритм частоты выборки автоматически подстраивается под условия каждого периода, обеспечивая оптимальный баланс между детализацией и объемом данных.

3. **Геопространственная интеграция**: использование стандартных форматов геопространственных данных обеспечивает легкую интеграцию с существующими ГИС-системами и инструментами анализа.

4. **Высокая геодезическая точность**: использование точных моделей эллипсоида WGS84 обеспечивает точность расчетов, необходимую для планирования высокодетальных РСА-съемок.

5. **Комплексность подхода**: система объединяет расчет орбитальной механики, геометрические модели РСА-систем, проверку видимости и создание геопространственных объектов в единый комплексный инструмент.

## 7. Обсуждение

### 7.1. Валидность методологии

Разработанная методология основана на фундаментальных принципах орбитальной механики и геометрии РСА-систем. Использование стандартных библиотек (pyorbital, sgp4) для расчета орбитальных параметров обеспечивает высокую точность результатов. Преобразование координат между различными системами выполняется с учетом параметров эллипсоида WGS84, что гарантирует геодезическую точность расчетов.

Угловые ограничения (88-92°) соответствуют требованиям, предъявляемым к РСА-системам для обеспечения оптимального качества изображений. Этот диапазон обеспечивает практически перпендикулярное положение объекта относительно направления движения космического аппарата, что минимизирует геометрические искажения и обеспечивает максимальное разрешение.

### 7.2. Эффективность алгоритма

Разработанный алгоритм эффективно обрабатывает длительные периоды наблюдения (16 суток и более). Оптимизация частоты выборки позволяет минимизировать объем сохраняемых данных при обеспечении достаточной детализации траекторий. Адаптивный подход к определению частоты выборки обеспечивает, что даже при высокой фильтрации точек (до 90-95%) в каждом периоде сохраняется достаточное количество данных для анализа.

Использование векторизованных операций NumPy и эффективных алгоритмов геопространственных вычислений обеспечивает приемлемую скорость работы системы даже при обработке больших объемов данных.

### 7.3. Ограничения и допущения

Разработанная методология имеет ряд ограничений и допущений:

1. **Модель орбиты**: используется модель SGP4, которая является упрощенной моделью и не учитывает все возмущения орбиты. Для более точных расчетов может потребоваться использование более сложных моделей.

2. **Атмосферные эффекты**: не учитываются атмосферные эффекты, которые могут влиять на условия видимости и качество радиолокационных изображений (РЛИ).

3. **Динамика объекта**: предполагается, что наземный объект неподвижен. Для движущихся объектов требуется модификация алгоритма.

4. **Энергетические ограничения**: не учитываются ограничения по энергопотреблению и возможностям системы передачи данных космического аппарата.

5. **Конфликты расписаний**: не рассматривается задача оптимизации расписаний при наличии множественных целей и ограничений по ресурсам.

### 7.4. Возможности расширения

Разработанная система может быть расширена в следующих направлениях:

1. **Множественные цели**: добавление возможности одновременного планирования съемок для множественных наземных объектов с учетом приоритетов и ограничений по ресурсам.

2. **Оптимизация расписаний**: интеграция алгоритмов оптимизации для построения оптимальных расписаний съемок с учетом всех ограничений и требований.

3. **Прогнозирование**: добавление функциональности прогнозирования периодов наблюдения на основе анализа орбитальных параметров и исторических данных.

4. **Визуализация**: расширение возможностей визуализации результатов, включая интерактивные карты и трехмерные визуализации траекторий.

5. **Интеграция с системами управления**: интеграция с системами управления космическими аппаратами для автоматической загрузки расписаний съемок.

### 7.5. Практическое применение

Разработанная система может быть использована для:

1. **Планирования РСА-съемок**: автоматическое определение оптимальных периодов для проведения съемок конкретных наземных объектов.

2. **Анализа возможностей**: оценка возможности проведения съемок в заданные временные интервалы с учетом орбитальных параметров и угловых ограничений.

3. **Оптимизации ресурсов**: анализ эффективности использования ресурсов космического аппарата и выявление возможностей для оптимизации.

4. **Обучения и исследований**: использование в образовательных целях и для проведения исследований в области планирования съемок с использованием космических аппаратов.

## 8. Заключение

В работе представлена методология и программная реализация системы расчета количества снимков за период обзора и получения параметров РСА-съемки во время каждого снимка. **Цель программы** - автоматический расчет количества возможных снимков в детальном прожекторном режиме (ДПР) для каждого периода наблюдения и определение детальных параметров РСА-съемки для каждого снимка.

Разработанный алгоритм учитывает геометрические параметры орбиты космического аппарата, угловые ограничения съемки, условия видимости и наклонную дальность, обеспечивая автоматическое определение временных интервалов, подходящих для проведения съемки. Для каждого периода наблюдения программа рассчитывает количество возможных снимков с учетом времени синтеза апертуры (10 секунд) и времени переключения антенны (2 секунды). Для каждого снимка определяются параметры съемки: время начала и окончания, координаты космического аппарата, угол относительно траверзной плоскости, наклонная дальность, доплеровская частота, азимут трассы и другие геометрические характеристики.

Проведенные расчеты для 16-суточного периода наблюдения показали эффективность разработанной методологии. Было идентифицировано 23 периода наблюдения с общей длительностью 32.17 минут. Для каждого периода было рассчитано количество возможных снимков в детальном прожекторном режиме, а для каждого снимка получены детальные параметры РСА-съемки. Анализ результатов подтвердил корректность работы алгоритма и соответствие результатов ожидаемым значениям для данного типа расчетов.

Разработанная система позволяет автоматизировать процесс планирования РСА-съемок, расчета количества снимков для каждого периода обзора и получения параметров съемки для каждого снимка. Система может быть использована как для практических задач планирования съемок, так и для исследований в области оптимизации использования ресурсов космических аппаратов.

Дальнейшее развитие системы может включать расширение функциональности для работы с множественными целями, интеграцию алгоритмов оптимизации расписаний и расширение возможностей визуализации результатов.

## Список литературы

[1] Curlander, J. C., & McDonough, R. N. (1991). *Synthetic aperture radar: systems and signal processing*. John Wiley & Sons.

[2] Moreira, A., Prats-Iraola, P., Younis, M., Krieger, G., Hajnsek, I., & Papathanassiou, K. P. (2013). A tutorial on synthetic aperture radar. *IEEE Geoscience and Remote Sensing Magazine*, 1(1), 6-43. DOI: 10.1109/MGRS.2013.2248301

[3] Cumming, I. G., & Wong, F. H. (2005). *Digital processing of synthetic aperture radar data: algorithms and implementation*. Artech House.

[4] Vallado, D. A., & McClain, W. D. (2013). *Fundamentals of astrodynamics and applications* (4th ed.). Microcosm Press.

[5] Curtis, H. D. (2013). *Orbital mechanics for engineering students*. Butterworth-Heinemann.

[6] Montenbruck, O., & Gill, E. (2012). *Satellite orbits: models, methods, and applications*. Springer Science & Business Media.

[7] Верба, В. С., Неронский, Л. Б., Осипов, И. Г., Лиханский, С. Г., Пущинский, С. Н., Турук, В. Э. (2010). Формирование точечных моделей объектов по комплексным РСА изображениям // Сб. трудов НТК «Современные проблемы дистанционного зондирования Земли из космоса». М.: ИКИ РАН. Вып. VII.

[8] Неронский, Л. Б., Михайлов, В. Ф., Брагин, И. В. (1999). Микроволновая аппаратура дистанционного зондирования Земли и атмосферы. Радиолокаторы с синтезированной апертурой антенны: Учебное пособие. СПб.: СПбГУАП. Ч. 2. 220 с. *(Учебное пособие)*

[9] Ширман, Я. Д., Голиков, В. Н., Бусыгин, И. Н. (1970). Теоретические основы радиолокации / Под ред. Я.Д. Ширмана. М.: Сов. радио.

[10] Толстов, Е. Ф., Филатов, А. А. (1995). Модель пространственно-временного сигнала, создаваемого движущейся точечной целью в РСА. НММ по цифровой обработке сигналов. М.: ВВИА им. Н.Е. Жуковского.

[11] Неронский, Л. Б. (2004). Перспективы совершенствования космических средств радиолокационного наблюдения земной поверхности // Наукоемкие технологии. № 8-9. С. 66-87.

[12] Верба, В., Неронский, Л., Осипов, И. (2005). Russian Spaceborne Imaging Radars: Scientific and Technical Achievements // Proc. of URSI GA'2005, New Delhi, India. Oct 23-29 2005.

[13] Лупян, Е. А., Барталев, С. А., Толпин, В. А., Жарко, В. О., & Крашенинникова, Ю. С. (2016). Современные возможности системы оперативного мониторинга состояния растительности на основе спутниковых данных. *Современные проблемы дистанционного зондирования Земли из космоса*, 13(5), 28-46.

[14] Кондратьев, К. Я., Григорьев, А. А. (1985). Космическое землеведение. М.: Наука, 1985. 157 с.

[15] Бондур, В. Г., Савиных, В. П. (2019). Современные методы дистанционного зондирования Земли из космоса. *Исследование Земли из космоса*, (1), 3-20.

[16] Забродин, А. В. (2015). Геометрическая калибровка космических радиолокационных систем. *Радиотехника и электроника*, 60(8), 815-825.

[17] Овчинников, М. Ю. (2016). Введение в динамику космического полёта: учебное пособие. М.: МФТИ, 2016. 208 с. ISBN 978-5-7417-0588-9 *(Учебное пособие)*

[18] Зайцев, В. В. (2022). Расчет длительности наблюдения при радиолокационной съемке. *Известия вузов. Приборостроение*, 65(9), 685-695. DOI: 10.17586/0021-3454-2022-65-9-685-695.

[19] Руководство пользователя данными дистанционного зондирования Земли, получаемыми космической системой «Кондор-ФКА». Версия 1. АО «ВПК «НПО машиностроения», 2023. 112 с.

---

## Установка и использование

### Установка зависимостей

```bash
pip install -r requirements.txt
```

### Запуск расчета

```bash
python continuous_angle_calc.py
```

### Структура проекта

- `continuous_angle_calc.py` - основной скрипт расчета количества снимков за период обзора и параметров РСА-съемки для каждого снимка
- `calc_cord.py` - преобразование географических координат в ГИСК
- `read_TBF.py` - чтение TLE данных из файла или Space-Track API
- `README.md` - полная документация методологии и использования программы

### Формат выходных данных

Результаты сохраняются в формате GPKG (GeoPackage — ГеоПакет) в папке `result/`:
- `periods_points.gpkg` - точки траектории космического аппарата с параметрами РСА-съемки для каждого снимка:
  - Координаты космического аппарата в моменты съемки
  - Угол относительно траверзной плоскости
  - Наклонная дальность
  - Доплеровская частота
  - Номер снимка, которому соответствует точка
- `periods_squares.gpkg` - квадратные рамки для каждого снимка в детальном прожекторном режиме (ДПР):
  - Для каждого снимка создается отдельная рамка размером 10×10 км
  - Атрибуты включают номер снимка, время съемки, азимут трассы, общее количество снимков в периоде
- `periods_points.txt` - таблица атрибутов точек траектории для анализа

Программа рассчитывает количество снимков для каждого периода обзора и предоставляет детальные параметры РСА-съемки для каждого снимка.

--
